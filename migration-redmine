
##############################################

links :::: https://wiki.blue-it.org/Redmine

##############################################

migration of redmine mysgl db to postgresql db

##############################################


nano /etc/redmine/default/database.yml

production:
  adapter: postgresql
  database: redmine
  host: postgres-01.ckcph7qomso4.eu-west-1.rds.amazonaws.com
  port: 5432
  username: redminerw
  password: red(!49okn
  encoding: utf8
  schema_search_path: public





cd [redmine home]
nano Gemfile.local

>gem 'activerecord-postgresql-adapter'
>gem 'pg'


install dependency for new ruby version


apt-get install -y apache2 php5 libapache2-mod-php5 mysql-server php5-mysql libapache2-mod-perl2 libcurl4-openssl-dev libssl-dev apache2-prefork-dev libapr1-dev libaprutil1-dev libmysqlclient-dev libmagickcore-dev libmagickwand-dev curl git-core gitolite patch build-essential bison zlib1g-dev libssl-dev libxml2-dev libxml2-dev sqlite3 libsqlite3-dev autotools-dev libxslt1-dev libyaml-0-2 autoconf automake libreadline6-dev libyaml-dev libtool imagemagick apache2-utils ssh zip libicu-dev libssh2-1 libssh2-1-dev cmake libgpg-error-dev subversion libapache2-svn git nano tar unzip libdbd-pg-ruby


apt-get -y install  software-properties-common


add-apt-repository ppa:brightbox/ruby-ng


apt-get update


 apt-get -y install ruby2.1 ruby-switch ruby2.1-dev ri2.1 libruby2.1 libssl-dev zlib1g-dev


ruby-switch --set ruby2.1



 gpg --keyserver hkp://pgp.mit.edu --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3


 curl -sSL https://get.rvm.io | bash -s stable


 /bin/bash -l -c "rvm install 2.1.4"


 gem update


 gem install bundler


gem install pg


gem install activerecord-postgresql-adapter


bundle install


if it get successfull output, then it will work

eg : 

root@ip-172-16-100-60:/usr/share/redmine# bundle install
Don't run Bundler as root. Bundler can ask for sudo if it is needed, and installing
your bundle as root will break this application for all non-root users on this
machine.
Resolving dependencies...
Using pg 0.19.0
Using bundler 1.13.2
Using activerecord-postgresql-adapter 0.0.1
Bundle complete! 2 Gemfile dependencies, 3 gems now installed.
Gems in the groups development and test were not installed.
Use `bundle show [gemname]` to see where a bundled gem is installed.


service apache2 restart



